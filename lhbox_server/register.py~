from database import mydb

class register(object):
    def __init__(self):
        self.regdb = mydb('localhost',27017)
        self.regdb.use('devilbox')
        self.regdb.setCollection('register')
    

    def sign_up(self, username, password):
        if self.regdb.exist({'username':username}) == True:
            print('User already exists.')
            return False
        else:
            self.regdb.insert({'username':username, 'password':password})
            print('Sign up successfully.')
            return True
    
    def login(self, username, password):
        if self.regdb.exist({'username':username}) == False:
            print('User not exist')
            return False
        else:
            result = self.regdb.find_one({'username':username})
            if result['password'] != password:
                print('Incorrect password.')
                return False
            else:
                return True
            
        
    def delete_user(self, username):
        if self.regdb.exist({'username':username}) == False:
            print('Delete user fail: user not exist.')
            return False
        else:
            self.regdb.remove({'username':username})
            print('Delete user:' + username + ' successfully.')
        
